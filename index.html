<!DOCTYPE html>
<html>
<head>
 <title>Learnthings.js</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<style type="text/css">
body {
  margin: 0;
  padding: 0;
  background: #000;
}
#theimage {
  width: 100%;
}
</style>
<script type="text/javascript">

// At least how many milliseconds each image is showed
var timeTreshold = 5000;
// How many times any key must be pressed after timeTreshold seconds
var keyTreshold = 5;

var images = [
"http://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Coq_Belle-Ile.jpg/1024px-Coq_Belle-Ile.jpg",
"http://upload.wikimedia.org/wikipedia/commons/c/c4/Lleyn_sheep.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Sus_scrofa_scrofa.jpg/1280px-Sus_scrofa_scrofa.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Cow_female_black_white.jpg/1280px-Cow_female_black_white.jpg",
"http://upload.wikimedia.org/wikipedia/commons/2/26/YellowLabradorLooking_new.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Nokota_Horses.jpg/1280px-Nokota_Horses.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Anas_platyrhynchos_var._domesticus_01.jpg/1280px-Anas_platyrhynchos_var._domesticus_01.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/European_shorthair_procumbent_Quincy.jpg/1280px-European_shorthair_procumbent_Quincy.jpg",
"http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Chickens_eating.jpg/1024px-Chickens_eating.jpg"
];

var sounds = [
"http://www.animal-sounds.org/farm/Rooster%20animals070.wav",
"http://www.animal-sounds.org/farm/Sheep%20animals058.wav",
"http://www.animal-sounds.org/farm/Pigs%20eating%20animals113.wav",
"http://www.animal-sounds.org/farm/Cow%20animals084.wav",
"http://www.animal-sounds.org/farm/Dog%20bark%20animals079.wav",
"http://www.animal-sounds.org/farm/Horse-whinnying%20animals037.wav",
"http://www.animal-sounds.org/farm/Duck-quacking%20animals038.wav",
"http://www.animal-sounds.org/farm/Cat%20meow%20animals021.wav",
"http://www.animal-sounds.org/farm/Chicken%20coop%20animals050.wav"
];

var changeImage = function() {
	$image = $("#theimage")
	var i = Math.floor(Math.random() * images.length);
	$("#main").css("margin-top", "-1100px");
	$image.attr("src", images[i]);

	var $audio = $("#theaudio");
	$audio.empty();
	var source = $("<source/>");
	source.attr("src", sounds[i]);
	$audio.append(source);
	// delay slide so that the images has been loaded
	setTimeout("slideImage()", 100);

	setTimeout("nextImage()", timeTreshold);
};

// wait for keyTreshold keypresses
var nextImage = function(keysLimit) {
	if (keysLimit == undefined) {
		setTimeout("nextImage(" + (keypressed + keyTreshold) + ")", 500);
	} else if (keypressed > keysLimit) {
		changeImage();
	} else {
		setTimeout("nextImage(" + keysLimit + ")", 500);
	}
};

var slideImage = function() {
    $('#main').animate({
        "margin-top": "0"
    }, 'slow', function() {
        // Animation complete.
	$("#theaudio")[0].play();
    });
}

var keypressed = 0;
var oldKey = 0;

$(document).ready(function(){
	// keydown event loop
	$("body").keydown(function(event) {
		if (event.keyCode != oldKey) {
			keypressed++;
		}
		oldKey = event.keyCode;
	});

	changeImage();
});

</script>
</head>
<body>


<div id="main"><img id="theimage"></div>
<audio id="theaudio">
</audio>

</body>
</html>
